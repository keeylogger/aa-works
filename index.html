<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apex Auto Works</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom CSS for sleek animations and specific overrides */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a; /* Dark background for sleek look */
            color: #e0e0e0; /* Light text color */
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        /* Page transition animation */
        .page-transition {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .page-transition.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Hero section specific styles for "wow" effect */
        .hero-section {
            /* CHANGE THIS TO UPDATE IMAGE: Use a high-resolution, sleek car image (e.g., a dark, moody shot of a sports car engine or a car on a dyno) */
            background-image: url('https://images.unsplash.com/photo-1645400379459-f6fd3d963fd4?q=80&w=1916&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* Parallax effect */
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .hero-overlay {
            background: rgba(0, 0, 0, 0.6); /* Dark overlay */
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
        }

        .hero-content {
            z-index: 2;
            text-align: center;
            color: #ffffff;
            position: relative;
            animation: fadeInScale 1.5s ease-out forwards;
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Button styles */
        .btn-primary {
            /* Updated to use a slightly darker blue for primary action */
            @apply bg-blue-700 hover:bg-blue-800 text-white font-semibold py-3 px-8 rounded-full shadow-lg transition-all duration-300 ease-in-out transform hover:scale-105;
        }

        .liquid-button-container {
            position: relative;
            width: 250px;
            height: 60px;
            border: 2px solid #3b82f6; /* Blue outline */
            border-radius: 40px; /* Rounded corners for the button */
            overflow: hidden; /* Crucial for clipping the liquid elements */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s ease;
        }

        /* Update .hero-btn to handle text layers */
        .hero-btn {
            position: relative; /* Ensure children are positioned relative to it */
            overflow: hidden; /* Crucial for clipping the text */
            width: 250px;
            height: 60px;
            border-radius: 40px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s ease;
            background-color: #e2e8f0;
            font-size: 1.25rem; /* Ensure font styles are on the button or inherited */
            font-weight: 600;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border: none;
            outline: none;
            z-index: 3; /* Keep button text on top */
            background-color: transparent; /* Keep transparent to show liquid */
        }

        /* Base text layer (always visible, but will be covered by the liquid text) */
        .hero-btn-text-base {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #888888; /* Original dark text color */
            z-index: 1; /* Below liquid text layer */
            /* Ensure font properties match the button */
            font-size: inherit;
            font-weight: inherit;
        }

        /* Liquid-filled text layer (this one will be clipped to show the fill effect) */
        .hero-btn-text-liquid {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #ffffff; /* White text color when filled by blue liquid */
            z-index: 2; /* Above base text layer */
            /* Initial state: completely hidden at the bottom. GSAP will animate this. */
            clip-path: inset(100% 0% 0% 0%);
            /* Ensure font properties match the button */
            font-size: inherit;
            font-weight: inherit;
        }

        .liquid-button-container:hover .hero-btn {
            color: #ffffff; /* Change text color to white on hover */
        }

        /* Main liquid fill layer - this will fill the button from bottom up */
        .liquid-fill-layer {
            position: absolute;
            bottom: 0; /* Position at the bottom */
            left: 0;
            width: 100%;
            height: 0; /* Start with 0 height */
            background-color: #3b82f6; /* Blue liquid color */
            border-radius: 5px; /* Match button border-radius */
            z-index: 1; /* Below button text */
            transform-origin: bottom center; /* For smooth height animation */
        }

        /* Container for dynamically created droplets and pouring blobs */
        .dynamic-elements-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allows clicks to pass through to the button */
            z-index: 2; /* Above liquid fill layer, below text */
        }

        /* Styles for dynamically created liquid drops/blobs */
        .dynamic-drop, .droplet {
            position: absolute;
            background-color: #3b82f6; /* Blue liquid color */
            opacity: 1; /* Always visible as requested */
            border-radius: 50%; /* Ensure circular base shape */
            transform-origin: center center; /* For squash/stretch effect */
        }
        /* Specific styles for droplets */
        .droplet {
            z-index: 2; /* Above dynamic drops, below text */
        }

        /* Card styles for services */
        .service-card {
            /* Existing @apply classes and core card styles */
            @apply relative rounded-xl shadow-xl overflow-hidden transition-all duration-300 ease-in-out transform hover:scale-105 cursor-pointer;
            min-height: 120px;
            text-align: center;
            border-radius: 1.5rem; /* Ensure this is applied consistently */
            position: relative;
            background-color: transparent; /* Card itself remains transparent */
            padding: 0; /* Important for outline not to be pushed in */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            isolation: isolate;
            overflow: hidden; /* **Essential** to clip the rotating gradient */
        }

        /* The rotating gradient layer */
        .service-card::before {
            content: '';
            position: absolute;
            /* Make it significantly larger to ensure corners are always covered */
            top: -100%; /* Adjust these values to make it much larger */
            left: -100%;
            width: 300%; /* Triple the width of the parent */
            height: 300%; /* Triple the height of the parent */
            /* Remove border-radius: inherit; for ::before
            Instead, give it a very large, absolute border-radius to make it circular,
            or simply don't define one to make it a large square.
            A large circular radius is usually best for smooth corner coverage.
            */
            border-radius: 50%; /* Make it circular to cover all rotation points smoothly */
            background: conic-gradient(from 0deg, #4e85f0, #FF0000, #4e85f0);
            z-index: -1;

            /* Rotation properties */
            transform-origin: center center;
            transform: rotate(0deg);
            transition: transform 0.4s linear;
        }

        .service-card:hover::before {
            transform: rotate(180deg);
        }

        /* The solid inner background layer, which creates the "hole" for the outline */
        .service-card::after {
            content: '';
            position: absolute;
            /* This 'inset' value defines the thickness of the border */
            inset: 2px; /* Keep this value to control border thickness */
            border-radius: inherit; /* This *must* inherit the parent's radius for the inner shape */
            background-color: #2a2a2a; /* Your desired inner card background color */
            z-index: 0;
            transition: background-color 0.3s ease-in-out;
        }

        .service-card:hover::after {
            background-color: rgba(20, 20, 20, 0.95);
        }

        /* Your actual card content wrapper */
        .service-card-content-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: transparent;
            border-radius: inherit;
            padding: 1rem;
            overflow: hidden;
            z-index: 1;
        }

        /* Desktop swipe content (hidden on mobile) */
        .service-card-dynamic-content {
            position: relative;
            width: 100%;
            min-height: 4rem; /* Increased min-height for smoother swipe and better fit */
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .service-card-front-text, .service-card-back-price {
            position: absolute; /* Explicitly set position */
            top: 0;            /* Explicitly set top */
            left: 0;           /* Explicitly set left */
            width: 100%;       /* Ensure full width of parent */
            height: 100%;      /* Ensure full height of parent */
            display: flex;     /* Use flexbox for centering content */
            align-items: center; /* Vertically center content */
            justify-content: center; /* Horizontally center content */
            text-align: center; /* Fallback for text alignment within the flex item */
            backface-visibility: hidden;
            box-sizing: border-box; /* Include padding/border in element's total width/height */
            padding: 0 1rem; /* Add some horizontal padding to prevent text from touching edges */
        }
        /* Initial state for price text (hidden) */
        .service-card-back-price {
            opacity: 0; /* Start invisible */
        }

        /* Price text specific styling */
        .service-card-back-price .price-text {
            font-size: 1.25rem; /* Using text-xl equivalent */
            line-height: 1; /* Ensures single line by preventing extra space */
            white-space: nowrap; /* Prevents text from wrapping to the next line */
        }

        /* Mobile specific styles for collapsible divs */
        @media (max-width: 768px) {
            .service-card {
                transform: none !important; /* Override desktop hover transform */
                transition: none !important; /* Override desktop hover transition */
                min-height: auto; /* Allow height to be determined by content */
                cursor: pointer; /* Keep cursor pointer */
            }

            .service-card:hover {
                transform: none !important; /* Ensure no scale on hover for mobile */
            }

            /* The gradient outline should still rotate on hover for mobile */
            .service-card::before {
                transition: transform 0.4s linear; /* Keep the rotation transition */
            }

            .service-card-content-wrapper {
                padding: 1rem; /* Adjust padding for mobile */
            }

            /* Mobile specific description (always visible) */
            .service-description {
                display: block; /* Show on mobile */
                text-align: center;
                margin-bottom: 0.5rem; /* Small margin below description */
                color: #gray-400; /* Ensure text color */
                font-size: 0.875rem; /* text-sm equivalent */
            }

            /* Collapsible content container for mobile */
            .service-collapsible-content {
                height: 0;
                opacity: 0; /* Start invisible */
                overflow: hidden;
                transition: height 0.3s ease-out, opacity 0.3s ease-out; /* Smooth expansion/collapse and fade */
                width: 100%; /* Ensure it takes full width */
                display: flex;
                justify-content: center; /* Center content horizontally */
                align-items: center; /* Vertically center content */
                flex-direction: column; /* Stack price if needed */
                padding-top: 0; /* No padding when collapsed */
            }

            .service-card.expanded .service-collapsible-content {
                height: auto; /* Will expand to content height */
                opacity: 1; /* Fade in */
                min-height: 2.5rem; /* Ensure minimum height for price */
                padding-top: 0.5rem; /* Add some padding when expanded */
            }

            /* Mobile specific price text */
            .service-price {
                text-align: center;
                width: 100%; /* Ensure it takes full width of its parent */
                color: #4e85f0; /* Theme blue */
                font-size: 1.25rem; /* text-xl equivalent */
                font-weight: bold;
            }

            /* Hide the desktop swipe elements on mobile */
            .service-card-dynamic-content {
                display: none !important;
            }
            .service-card-front-text,
            .service-card-back-price {
                display: none !important;
            }
        }

        /* Calendar styles */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .calendar-day {
            @apply p-4 rounded-lg flex flex-col items-center justify-center text-center cursor-pointer transition-all duration-200 ease-in-out opacity-70 hover:opacity-100; /* Default opacity 0.7, hover 1 */
            min-height: 100px; /* Ensure sufficient height for days */
            border: 1px solid #4a4a4a; /* Added subtle gray outline */
            border-radius: 6px;
            padding: 8px;
        }

        .calendar-day.inactive {
            @apply bg-zinc-700 text-gray-500 cursor-not-allowed opacity-50 hover:opacity-50; /* Inactive days remain muted */
        }

        .calendar-day.available {
            @apply bg-green-800 text-white; /* Darker green for softer mood */
            background-color: #166534; /* Explicit green-800 */
            opacity: 0.7;
            transition: all 0.3s ease-in-out;
        }

        .calendar-day.available:hover {
            opacity: 1;
        }

        .calendar-day.partially-available {
            @apply bg-yellow-700 text-white; /* Darker yellow/orange for softer mood */
            background-color: #a16207; /* Explicit yellow-700 */
            opacity: 0.7;
            transition: all 0.3s ease-in-out;
        }

        .calendar-day.partially-available:hover {
            opacity: 1;
        }

        .calendar-day.not-available {
            @apply bg-red-800 text-white cursor-not-allowed opacity-70 hover:opacity-70; /* Darker red for softer mood, no hover opacity change */
            background-color: #991b1b; /* Explicit red-800 */
            opacity: 0.7;
            transition: all 0.3s ease-in-out;
        }

        .calendar-day.not-available:hover {
            opacity: 1;
        }

        /* Weekend styling */
        .calendar-day.weekend {
            @apply bg-zinc-700 text-gray-400 cursor-not-allowed opacity-60 hover:opacity-60; /* Darkened and disabled for weekends */
        }

        .calendar-day-number {
            @apply text-2xl font-bold;
        }

        /* Ensure legend colors are explicitly set if Tailwind classes aren't rendering */
        .flex.items-center .bg-green-800 {
            background-color: #166534; /* Explicit green-800 */
        }
        .flex.items-center .bg-yellow-700 {
            background-color: #a16207; /* Explicit yellow-700 */
        }
        .flex.items-center .bg-red-800 {
            background-color: #991b1b; /* Explicit red-800 */
        }


        /* Modal styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
        }
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #2a2a2a;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            max-width: 500px;
            width: 90%;
            transform: translateY(-20px);
            transition: transform 0.3s ease-out;
        }
        .modal.show .modal-content {
            transform: translateY(0);
        }
        .modal-close {
            position: absolute; /* Ensure absolute positioning */
            top: -15px; /* Move it up by 15px outside the modal */
            right: -15px; /* Move it right by 15px outside the modal */
            background-color: #ef4444; /* Vibrant red background (Tailwind's red-500) */
            color: #ffffff; /* White 'x' */
            border-radius: 50%; /* Make it a perfect circle */
            width: 35px; /* Set a fixed width */
            height: 35px; /* Set a fixed height */
            display: flex; /* Use flexbox to center the 'x' */
            align-items: center; /* Vertically center the 'x' */
            justify-content: center; /* Horizontally center the 'x' */
            font-size: 1.5rem; /* Adjust 'x' font size */
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); /* Add a subtle shadow */
            transition: background-color 0.2s ease-in-out, transform 0.2s ease-in-out; /* Smooth transitions */
            z-index: 1001; /* Ensure it's above the modal */
        }
        .modal-close:hover {
            background-color: #dc2626; /* Darker red on hover */
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .hero-content h1 {
                font-size: 2.5rem;
            }
            .hero-content p {
                font-size: 1rem;
            }
            .calendar-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
            /* service-card and content-wrapper mobile adjustments are handled above within the media query */
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-zinc-900 bg-opacity-90 backdrop-blur-sm shadow-lg py-4">
        <div class="container mx-auto flex justify-between items-center px-6">
            <a href="#home" id="logo-link" class="text-3xl font-bold text-blue-500 tracking-wider">APEX AUTO WORKS</a>
            <div class="hidden md:flex space-x-8">
                <a href="#home" class="nav-link text-lg font-medium text-gray-300 hover:text-blue-400 transition-colors duration-300">Home</a>
                <a href="#services" class="nav-link text-lg font-medium text-gray-300 hover:text-blue-400 transition-colors duration-300">Services</a>
                <a href="#calendar" class="nav-link text-lg font-medium text-gray-300 hover:text-blue-400 transition-colors duration-300">Availability</a>
                <a href="#about" class="nav-link text-lg font-medium text-gray-300 hover:text-blue-400 transition-colors duration-300">About Us</a>
                <a href="#contact" class="nav-link text-lg font-medium text-gray-300 hover:text-blue-400 transition-colors duration-300">Contact</a>
            </div>
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-gray-300 hover:text-blue-400 focus:outline-none">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-zinc-900 bg-opacity-95 py-4">
            <div class="flex flex-col items-center space-y-4">
                <a href="#home" class="nav-link text-xl font-medium text-gray-300 hover:text-blue-400 transition-colors duration-300 py-2">Home</a>
                <a href="#services" class="nav-link text-xl font-medium text-gray-300 hover:text-blue-400 transition-colors duration-300 py-2">Services</a>
                <a href="#calendar" class="nav-link text-xl font-medium text-gray-300 hover:text-blue-400 transition-colors duration-300 py-2">Availability</a>
                <a href="#about" class="nav-link text-xl font-medium text-gray-300 hover:text-blue-400 transition-colors duration-300 py-2">About Us</a>
                <a href="#contact" class="nav-link text-xl font-medium text-gray-300 hover:text-blue-400 transition-colors duration-300 py-2">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main id="app-content" class="pt-24">
        <!-- Content will be injected here by JavaScript -->
    </main>

    <!-- Hidden container for preloaded pages -->
    <div id="preloaded-pages" style="display: none; visibility: hidden; height: 0; overflow: hidden;"></div>

    <!-- Footer -->
    <footer class="bg-zinc-900 py-10 text-center text-gray-400 text-sm mt-20">
        <div class="container mx-auto px-6">
            <p>&copy; Apex Auto Works. All rights reserved. @ 2025</p>
            <p class="mt-2">Designed for optimal performance and style.</p>
            <a href="#mechanic-login" class="text-blue-400 hover:underline mt-4 inline-block">Mechanic Login</a>
        </div>
    </footer>

    <!-- Day Timetable Modal -->
    <div id="timetable-modal" class="modal">
        <div class="modal-content relative">
            <span id="modal-close-button" class="modal-close">&times;</span>
            <h2 id="modal-date-title" class="text-3xl font-bold text-blue-400 mb-6 text-center"></h2>
            <div id="modal-timetable-content" class="text-lg text-gray-300 space-y-3">
                <!-- Timetable details will be injected here -->
            </div>
            <p class="text-center text-gray-400 mt-6 text-sm">To book an appointment, please contact us directly.</p>
        </div>
    </div>


    <script>
        // --- Page Content Definitions ---
        const pages = {
            home: `
                <section id="home-section" class="hero-section">
                    <div class="hero-overlay"></div>
                    <div class="hero-content">
                        <h1 class="text-6xl md:text-7xl font-extrabold tracking-tight mb-6 leading-tight">
                            ENGINEERED FOR <span class="text-blue-500">PERFECTION</span>
                        </h1>
                        <p class="text-xl md:text-2xl text-gray-300 mb-10 max-w-3xl mx-auto">
                            Unleash the true potential of your vehicle with our precision tuning and expert care.
                        </p>
                        <div class="liquid-button-container mx-auto block">
                            <a href="#services" id="service-btn" class="hero-btn">
                                <span class="hero-btn-text-base">Explore Services</span>
                                <span class="hero-btn-text-liquid">Explore Services</span>
                            </a>
                        <!-- This layer will animate its height to create the main liquid fill -->
                        <div class="liquid-fill-layer"></div>
                        <!-- Container for dynamically created pouring elements and droplets -->
                        <div class="dynamic-elements-container"></div>
                        </div>
                </section>

                <section class="bg-zinc-900 py-20 page-transition">
                    <div class="container mx-auto px-6">
                        <h2 class="text-5xl font-bold text-center text-red-500 mb-16">Our Commitment to Excellence</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-12 text-center">
                            <div class="p-8 bg-zinc-800 rounded-xl shadow-xl transform hover:scale-105 transition-transform duration-300">
                                <h3 class="text-6xl font-extrabold text-blue-500 mb-4">15+</h3>
                                <p class="text-xl text-gray-300">YEARS OF EXPERIENCE</p>
                                <!-- CHANGE THIS TEXT: Update the description for years of experience -->
                                <p class="text-gray-400 mt-2">We bring over a decade and a half of expertise to every vehicle we touch.</p>
                            </div>
                            <div class="p-8 bg-zinc-800 rounded-xl shadow-xl transform hover:scale-105 transition-transform duration-300">
                                <h3 class="text-6xl font-extrabold text-blue-500 mb-4">500+</h3>
                                <p class="text-xl text-gray-300">HAPPY CLIENTS</p>
                                <!-- CHANGE THIS TEXT: Update the description for happy clients -->
                                <p class="text-gray-400 mt-2">Our growing family of satisfied customers speaks volumes about our service.</p>
                            </div>
                            <div class="p-8 bg-zinc-800 rounded-xl shadow-xl transform hover:scale-105 transition-transform duration-300">
                                <h3 class="text-6xl font-extrabold text-blue-500 mb-4">1000+</h3>
                                <p class="text-xl text-gray-300">PROJECTS COMPLETED</p>
                                <!-- CHANGE THIS TEXT: Update the description for projects completed -->
                                <p class="text-gray-400 mt-2">From routine tune-ups to complex custom builds, we've done it all.</p>
                            </div>
                        </div>

                        <div class="mt-20 grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                            <div class="md:order-2">
                                <!-- CHANGE THIS TO UPDATE IMAGE: Image related to car performance or engineering -->
                                <img src="https://images.unsplash.com/photo-1711166952971-29a86e613a33?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Precision Engineering" class="rounded-xl shadow-2xl w-full h-auto object-cover">
                            </div>
                            <div class="text-left md:order-1">
                                <h3 class="text-4xl font-bold text-blue-400 mb-6">The Art of Automotive Tuning</h3>
                                <!-- CHANGE THIS TEXT: Update the text about automotive tuning -->
                                <p class="text-lg text-gray-300 leading-relaxed">
                                    At Apex Auto Works, we see cars not just as machines, but as canvases for performance art. Every adjustment, every modification, is executed with an understanding of both engineering principles and the thrill of the drive. We unlock hidden power, refine handling, and enhance the overall driving experience, ensuring your vehicle performs exactly as you envision.
                                </p>
                            </div>
                        </div>

                        <div class="mt-20 grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                            <div>
                                <!-- CHANGE THIS TO UPDATE IMAGE: Image of a sleek car interior or advanced tech -->
                                <img src="https://images.unsplash.com/photo-1517524206127-48bbd363f3d7?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Advanced Technology" class="rounded-xl shadow-2xl w-full h-auto object-cover">
                            </div>
                            <div class="text-left">
                                <h3 class="text-4xl font-bold text-red-400 mb-6">Innovation on Four Wheels</h3>
                                <!-- CHANGE THIS TEXT: Update the text about innovation and technology -->
                                <p class="text-lg text-gray-300 leading-relaxed">
                                    Staying ahead in the automotive world means embracing innovation. We utilize cutting-edge diagnostic tools and the latest tuning software to ensure precision and efficiency. Our commitment to advanced technology means your vehicle receives the best possible care, tailored to its unique specifications and your performance goals.
                                </p>
                            </div>
                        </div>

                        <!-- New Call to Action Section -->
                        <div class="mt-20 text-center">
                            <h3 class="text-4xl font-bold text-blue-400 mb-8">Ready to Transform Your Ride?</h3>
                            <p class="text-xl text-gray-300 mb-10 max-w-2xl mx-auto">
                                Have a specific project in mind or need a custom quote? Let's discuss your vision.
                            </p>
                            <div class="liquid-button-container mx-auto block">
                                <a href="#contact" id="contact-quote-btn" class="hero-btn">
                                    <span class="hero-btn-text-base">Ask us for a quote</span>
                                    <span class="hero-btn-text-liquid">Ask us for a quote</span>
                                </a>
                            <!-- This layer will animate its height to create the main liquid fill -->
                            <div class="liquid-fill-layer"></div>
                            <!-- Container for dynamically created pouring elements and droplets -->
                            <div class="dynamic-elements-container"></div>
                            </div>
                        </div>
                    </section>
                `,
            services: `
                <section id="services-section" class="container mx-auto px-6 py-16 page-transition">
                    <h2 class="text-5xl font-bold text-center text-blue-400 mb-16">Our Services<p class="text-gray-400 text-sm font-thin pt-2">Click on the cards for pricing</p></h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div class="service-card" data-service-id="tuning">
                            <div class="service-card-content-wrapper">
                                <h3 class="text-2xl font-semibold mb-2 text-white z-10 relative">Performance Tuning</h3>
                                <p class="service-description text-gray-400 text-sm mb-2">Engine optimization for power.</p>
                                <div class="service-collapsible-content">
                                    <p class="service-price text-blue-400 text-xl font-bold"><span class="price-text">$499 - $1999</span></p>
                                </div>
                                <div class="service-card-dynamic-content">
                                    <p class="service-card-front-text text-gray-400 text-sm">Engine optimization for power.</p>
                                    <p class="service-card-back-price text-blue-400 text-xl font-bold"><span class="price-text">$499 - $1999</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="service-card" data-service-id="maintenance">
                            <div class="service-card-content-wrapper">
                                <h3 class="text-2xl font-semibold mb-2 text-white z-10 relative">Routine Maintenance</h3>
                                <p class="service-description text-gray-400 text-sm mb-2">Essential care for smooth running.</p>
                                <div class="service-collapsible-content">
                                    <p class="service-price text-blue-400 text-xl font-bold"><span class="price-text">$99 - $349</span></p>
                                </div>
                                <div class="service-card-dynamic-content">
                                    <p class="service-card-front-text text-gray-400 text-sm">Essential care for smooth running.</p>
                                    <p class="service-card-back-price text-blue-400 text-xl font-bold"><span class="price-text">$99 - $349</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="service-card" data-service-id="diagnostic">
                            <div class="service-card-content-wrapper">
                                <h3 class="text-2xl font-semibold mb-2 text-white z-10 relative">Diagnostic & Repair</h3>
                                <p class="service-description text-gray-400 text-sm mb-2">Expert problem solving and fixes.</p>
                                <div class="service-collapsible-content">
                                    <p class="service-price text-blue-400 text-xl font-bold"><span class="price-text">$149 - $999+</span></p>
                                </div>
                                <div class="service-card-dynamic-content">
                                    <p class="service-card-front-text text-gray-400 text-sm">Expert problem solving and fixes.</p>
                                    <p class="service-card-back-price text-blue-400 text-xl font-bold"><span class="price-text">$149 - $999+</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="service-card" data-service-id="suspension">
                            <div class="service-card-content-wrapper">
                                <h3 class="text-2xl font-semibold mb-2 text-white z-10 relative">Suspension Upgrades</h3>
                                <p class="service-description text-gray-400 text-sm mb-2">Improve handling and ride comfort.</p>
                                <div class="service-collapsible-content">
                                    <p class="service-price text-blue-400 text-xl font-bold"><span class="price-text">$399 - $1499</span></p>
                                </div>
                                <div class="service-card-dynamic-content">
                                    <p class="service-card-front-text text-gray-400 text-sm">Improve handling and ride comfort.</p>
                                    <p class="service-card-back-price text-blue-400 text-xl font-bold"><span class="price-text">$399 - $1499</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="service-card" data-service-id="brakes">
                            <div class="service-card-content-wrapper">
                                <h3 class="text-2xl font-semibold mb-2 text-white z-10 relative">Brake System Overhaul</h3>
                                <p class="service-description text-gray-400 text-sm mb-2">Enhanced stopping power and safety.</p>
                                <div class="service-collapsible-content">
                                    <p class="service-price text-blue-400 text-xl font-bold"><span class="price-text">$299 - $1299</span></p>
                                </div>
                                <div class="service-card-dynamic-content">
                                    <p class="service-card-front-text text-gray-400 text-sm">Enhanced stopping power and safety.</p>
                                    <p class="service-card-back-price text-blue-400 text-xl font-bold"><span class="price-text">$299 - $1299</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="service-card" data-service-id="fabrication">
                            <div class="service-card-content-wrapper">
                                <h3 class="text-2xl font-semibold mb-2 text-white z-10 relative">Custom Fabrication</h3>
                                <p class="service-description text-gray-400 text-sm mb-2">Bespoke solutions for unique projects.</p>
                                <div class="service-collapsible-content">
                                    <p class="service-price text-blue-400 text-xl font-bold"><span class="price-text">Quote Basis</span></p>
                                </div>
                                <div class="service-card-dynamic-content">
                                    <p class="service-card-front-text text-gray-400 text-sm">Bespoke solutions for unique projects.</p>
                                    <p class="service-card-back-price text-blue-400 text-xl font-bold"><span class="price-text">Quote Basis</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="service-card" data-service-id="alignment">
                            <div class="service-card-content-wrapper">
                                <h3 class="text-2xl font-semibold mb-2 text-white z-10 relative">Wheel Alignment</h3>
                                <p class="service-description text-gray-400 text-sm mb-2">Precise adjustments for optimal handling.</p>
                                <div class="service-collapsible-content">
                                    <p class="service-price text-blue-400 text-xl font-bold"><span class="price-text">$89 - $149</span></p>
                                </div>
                                <div class="service-card-dynamic-content">
                                    <p class="service-card-front-text text-gray-400 text-sm">Precise adjustments for optimal handling.</p>
                                    <p class="service-card-back-price text-blue-400 text-xl font-bold"><span class="price-text">$89 - $149</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="service-card" data-service-id="detailing">
                            <div class="service-card-content-wrapper">
                                <h3 class="text-2xl font-semibold mb-2 text-white z-10 relative">Premium Detailing</h3>
                                <p class="service-description text-gray-400 text-sm mb-2">Restore your car's showroom shine.</p>
                                <div class="service-collapsible-content">
                                    <p class="service-price text-blue-400 text-xl font-bold"><span class="price-text">$199 - $599</span></p>
                                </div>
                                <div class="service-card-dynamic-content">
                                    <p class="service-card-front-text text-gray-400 text-sm">Restore your car's showroom shine.</p>
                                    <p class="service-card-back-price text-blue-400 text-xl font-bold"><span class="price-text">$199 - $599</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            `,
            calendar: `
                <section id="calendar-section" class="container mx-auto px-6 py-16 page-transition">
                    <h2 class="text-5xl font-bold text-center text-blue-400 mb-12">Check Our Availability</h2>

                    <!-- Availability Legend (single line, centered) -->
                    <div class="max-w-full mx-auto p-6 bg-zinc-700 rounded-lg shadow-inner mb-8 flex flex-wrap justify-center gap-x-8 gap-y-4 text-lg">
                        <h4 class="text-2xl font-bold text-white flex-shrink-0">Availability Legend:</h4>
                        <div class="flex items-center">
                            <span class="w-6 h-6 rounded-full bg-green-800 mr-3"></span> Fully Available
                        </div>
                        <div class="flex items-center">
                            <span class="w-6 h-6 rounded-full bg-yellow-700 mr-3"></span> Partially Available
                        </div>
                        <div class="flex items-center">
                            <span class="w-6 h-6 rounded-full bg-red-800 mr-3"></span> Not Available
                        </div>
                    </div>

                    <!-- Calendar Grid -->
                    <div class="max-w-full mx-auto bg-zinc-800 rounded-xl shadow-xl p-8">
                        <div class="flex justify-between items-center mb-8">
                            <button id="prev-month" class="btn-primary py-2 px-4 text-lg">&lt;</button>
                            <h3 id="current-month-year" class="text-4xl font-bold text-white"></h3>
                            <button id="next-month" class="btn-primary py-2 px-4 text-lg">&gt;</button>
                        </div>
                        <div class="calendar-grid text-gray-300 font-semibold mb-6">
                            <div class="text-center text-blue-300">Mon</div>
                            <div class="text-center text-blue-300">Tue</div>
                            <div class="text-center text-blue-300">Wed</div>
                            <div class="text-center text-blue-300">Thu</div>
                            <div class="text-center text-blue-300">Fri</div>
                            <div class="text-center text-blue-300 weekend-header">Sat</div>
                            <div class="text-center text-blue-300 weekend-header">Sun</div>
                        </div>
                        <div id="calendar-days" class="calendar-grid">
                            <!-- Calendar days will be rendered here -->
                        </div>
                    </div>
                </section>
            `,
            about: `
                <section id="about-section" class="container mx-auto px-6 py-16 page-transition">
                    <h2 class="text-5xl font-bold text-center text-blue-400 mb-16">About Apex Auto Works</h2>
                    <div class="flex flex-col md:flex-row items-center md:space-x-12">
                        <div class="md:w-1/2 mb-10 md:mb-0">
                            <!-- CHANGE THIS TO UPDATE IMAGE: Image of the mechanic or workshop -->
                            <img src="https://images.pexels.com/photos/8470679/pexels-photo-8470679.jpeg" alt="Mechanic working on a car" class="rounded-xl shadow-2xl w-full h-auto object-cover">
                        </div>
                        <div class="md:w-1/2 text-lg leading-relaxed space-y-6">
                            <!-- CHANGE THIS TEXT: Update the introductory paragraph for the About Us section -->
                            <p>
                                Welcome to Apex Auto Works, where passion meets precision. Founded by a dedicated automotive enthusiast, our shop is built on the philosophy that every vehicle deserves meticulous attention and expert care. We specialize in elevating performance and ensuring reliability, whether it's for your daily driver or your track-day beast.
                            </p>
                            <!-- CHANGE THIS TEXT: Update the second paragraph for the About Us section -->
                            <p>
                                Our journey began with a simple love for cars and a commitment to mastering the art of automotive engineering. We believe in transparency, honesty, and delivering results that not only meet but exceed your expectations. At Apex Auto Works, your car isn't just a machine; it's a statement, and we're here to help it speak volumes.
                            </p>
                            <!-- CHANGE THIS TEXT: Update the third paragraph for the About Us section -->
                            <p>
                                We constantly stay updated with the latest automotive technologies and techniques, ensuring that we provide cutting-edge solutions for all your vehicle's needs. From routine maintenance to complex performance upgrades, trust Apex Auto Works to deliver unparalleled service.
                            </p>
                        </div>
                    </div>
                </section>
            `,
            contact: `
                <section id="contact-section" class="container mx-auto px-6 py-16 page-transition">
                    <h2 class="text-5xl font-bold text-center text-blue-400 mb-16">Get in Touch</h2>
                    <div class="max-w-3xl mx-auto bg-zinc-800 rounded-xl shadow-xl p-10">
                        <p class="text-lg text-center text-gray-300 mb-8">
                            Have questions or ready to schedule your service? Reach out to us!
                        </p>
                        <form class="space-y-6">
                            <div>
                                <label for="name" class="block text-gray-300 text-lg font-medium mb-2">Name</label>
                                <input type="text" id="name" name="name" class="w-full p-4 bg-zinc-700 border border-zinc-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white" placeholder="Your Name">
                            </div>
                            <div>
                                <label for="email" class="block text-gray-300 text-lg font-medium mb-2">Email</label>
                                <input type="email" id="email" name="email" class="w-full p-4 bg-zinc-700 border border-zinc-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white" placeholder="your.email@example.com">
                            </div>
                            <div>
                                <label for="subject" class="block text-gray-300 text-lg font-medium mb-2">Subject Category</label>
                                <select id="subject" name="subject" class="w-full p-4 bg-zinc-700 border border-zinc-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white">
                                    <option value="">Select a category</option>
                                    <option value="quote">Request a Quote</option>
                                    <option value="general">General Question</option>
                                    <option value="onsite">On-site Support Inquiry</option>
                                    <option value="appointment">Appointment Related</option>
                                    <option value="feedback">Feedback</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div>
                                <label for="message" class="block text-gray-300 text-lg font-medium mb-2">Message</label>
                                <textarea id="message" name="message" rows="6" class="w-full p-4 bg-zinc-700 border border-zinc-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white" placeholder="Tell us about your needs..."></textarea>
                            </div>
                            <div class="liquid-button-container mx-auto block">
                                <button type="submit" id="service-btn" class="hero-btn">
                                    <span class="hero-btn-text-base">Send Message</span>
                                    <span class="hero-btn-text-liquid">Send Message</span>
                                </button>
                            <!-- This layer will animate its height to create the main liquid fill -->
                            <div class="liquid-fill-layer"></div>
                            <!-- Container for dynamically created pouring elements and droplets -->
                            <div class="dynamic-elements-container"></div>
                            </div>
                        </form>
                        <div class="mt-10 text-center text-lg space-y-4">
                            <p><strong class="text-blue-400">Phone:</strong> +1 (555) 123-4567</p>
                            <p><strong class="text-blue-400">Email:</strong> info@apexautoworks.com</p>
                            <p><strong class="text-blue-400">Address:</strong> 123 Performance Ave, Tunerville, CA 90210</p>
                        </div>
                        <!-- Placeholder for map -->
                        <div class="mt-10 bg-zinc-700 rounded-xl overflow-hidden shadow-inner" style="height: 300px;">
                            <!-- CHANGE THIS TO UPDATE IMAGE: Embed an actual map here if desired -->
                            <img src="https://placehold.co/800x300/3a3a3a/e0e0e0?text=Map+Placeholder" alt="Map Location" class="w-full h-full object-cover">
                        </div>
                    </div>
                </section>
            `,
            'mechanic-login': `
                <section id="login-section" class="container mx-auto px-6 py-16 page-transition">
                    <h2 class="text-5xl font-bold text-center text-blue-400 mb-16">Mechanic Login</h2>
                    <div class="max-w-md mx-auto bg-zinc-800 rounded-xl shadow-xl p-10">
                        <p class="text-lg text-center text-gray-300 mb-8">
                            Authorized personnel only.
                        </p>
                        <form class="space-y-6">
                            <div>
                                <label for="username" class="block text-gray-300 text-lg font-medium mb-2">Username</label>
                                <input type="text" id="username" name="username" class="w-full p-4 bg-zinc-700 border border-zinc-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white" placeholder="Enter your username">
                            </div>
                            <div>
                                <label for="password" class="block text-gray-300 text-lg font-medium mb-2">Password</label>
                                <input type="password" id="password" name="password" class="w-full p-4 bg-zinc-700 border border-zinc-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white" placeholder="Enter your password">
                            </div>
                            <button type="submit" class="btn-primary w-full">Login</button>
                        </form>
                        <p class="text-center text-gray-500 text-sm mt-8">
                            Note: This is a frontend placeholder. No actual authentication is performed.
                        </p>
                    </div>
                </section>
            `
        };

        // --- Global State and Elements ---
        const appContent = document.getElementById('app-content');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const navLinks = document.querySelectorAll('.nav-link');
        const timetableModal = document.getElementById('timetable-modal');
        const modalCloseButton = document.getElementById('modal-close-button');
        const modalDateTitle = document.getElementById('modal-date-title');
        const modalTimetableContent = document.getElementById('modal-timetable-content');
        const logoLink = document.getElementById('logo-link');
        let currentPageId = null;

        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();

        // Hardcoded availability data for demonstration
        // Format: { 'YYYY-MM-DD': { status: 'available'|'partially-available'|'not-available', details: ['9:00 AM - 12:00 PM: Available', '1:00 PM - 3:00 PM: Booked'] } }
        const availabilityData = {
            // July 2025 (randomized for showcase)
            '2025-07-01': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-07-02': { status: 'partially-available', details: ['9:00 AM - 12:00 PM: Available', '1:00 PM - 3:00 PM: Booked', '3:00 PM - 5:00 PM: Available'] },
            '2025-07-03': { status: 'not-available', details: ['Fully booked for the day.'] },
            '2025-07-04': { status: 'available', details: ['10:00 AM - 6:00 PM: Fully Available'] },
            '2025-07-05': { status: 'not-available', details: ['Closed for holiday.'] },
            '2025-07-06': { status: 'not-available', details: ['Closed for weekend.'] },
            '2025-07-07': { status: 'partially-available', details: ['9:00 AM - 1:00 PM: Available', '2:00 PM - 5:00 PM: Booked'] },
            '2025-07-08': { status: 'available', details: ['8:00 AM - 4:00 PM: Fully Available'] },
            '2025-07-09': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-07-10': { status: 'partially-available', details: ['11:00 AM - 2:00 PM: Available', '3:00 PM - 5:00 PM: Booked'] },
            '2025-07-11': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-07-12': { status: 'not-available', details: ['Closed for weekend.'] },
            '2025-07-13': { status: 'not-available', details: ['Closed for weekend.'] },
            '2025-07-14': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-07-15': { status: 'partially-available', details: ['9:00 AM - 12:00 PM: Available', '1:00 PM - 5:00 PM: Booked'] },
            '2025-07-16': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-07-17': { status: 'not-available', details: ['Fully booked for the day.'] },
            '2025-07-18': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-07-19': { status: 'not-available', details: ['Closed for weekend.'] },
            '2025-07-20': { status: 'not-available', details: ['Closed for weekend.'] },
            '2025-07-21': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-07-22': { status: 'partially-available', details: ['9:00 AM - 1:00 PM: Available', '2:00 PM - 5:00 PM: Booked'] },
            '2025-07-23': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-07-24': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-07-25': { status: 'partially-available', details: ['9:00 AM - 12:00 PM: Available', '1:00 PM - 5:00 PM: Booked'] },
            '2025-07-26': { status: 'not-available', details: ['Closed for weekend.'] },
            '2025-07-27': { status: 'not-available', details: ['Closed for weekend.'] },
            '2025-07-28': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-07-29': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-07-30': { status: 'partially-available', details: ['9:00 AM - 1:00 PM: Available', '2:00 PM - 5:00 PM: Booked'] },
            '2025-07-31': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },

            // August 2025 (randomized for showcase)
            '2025-08-01': { status: 'partially-available', details: ['9:00 AM - 12:00 PM: Available'] },
            '2025-08-02': { status: 'not-available', details: ['Closed for weekend.'] },
            '2025-08-03': { status: 'not-available', details: ['Closed for weekend.'] },
            '2025-08-04': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-08-05': { status: 'not-available', details: ['Fully booked for the day.'] },
            '2025-08-06': { status: 'partially-available', details: ['1:00 PM - 5:00 PM: Available'] },
            '2025-08-07': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-08-08': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-08-09': { status: 'not-available', details: ['Closed for weekend.'] },
            '2025-08-10': { status: 'not-available', details: ['Closed for weekend.'] },
            '2025-08-11': { status: 'partially-available', details: ['9:00 AM - 12:00 PM: Available'] },
            '2025-08-12': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-08-13': { status: 'not-available', details: ['Fully booked for the day.'] },
            '2025-08-14': { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] },
            '2025-08-15': { status: 'partially-available', details: ['1:00 PM - 5:00 PM: Available'] },
        };


        // --- Utility Functions ---

        // Function to preload images for the About Us page
        function preloadAboutUsImages() {
            const imageUrls = [
                'https://images.pexels.com/photos/8470679/pexels-photo-8470679.jpeg', // Image 1 from About Us
                'https://images.unsplash.com/photo-1711166952971-29a86e613a33?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', // Image 2 from Home (also used on About Us conceptually if you move it)
                'https://images.unsplash.com/photo-1517524206127-48bbd363f3d7?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' // Image 3 from Home (also used on About Us conceptually if you move it)
            ];

            imageUrls.forEach(url => {
                const img = new Image();
                img.src = url;
                // Optionally, you can add onload/onerror handlers if you need to track preloading progress
                // img.onload = () => console.log(`Image loaded: ${url}`);
                // img.onerror = () => console.error(`Failed to load image: ${url}`);
            });
            console.log('About Us images are preloading in the background...');
        }

        // --- Utility Functions ---

        // Function to preload images for the About Us page
        function preloadAboutUsImages() {
            const imageUrls = [
                'https://images.pexels.com/photos/8470679/pexels-photo-8470679.jpeg', // Image 1 from About Us
                'https://images.unsplash.com/photo-1711166952971-29a86e613a33?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', // Image 2 from Home (also used on About Us conceptually if you move it)
                'https://images.unsplash.com/photo-1517524206127-48bbd363f3d7?q=80&w=1374&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' // Image 3 from Home (also used on About Us conceptually if you move it)
            ];

            imageUrls.forEach(url => {
                const img = new Image();
                img.src = url;
                // Optionally, you can add onload/onerror handlers if you need to track preloading progress
                // img.onload = () => console.log(`Image loaded: ${url}`);
                // img.onerror = () => console.error(`Failed to load image: ${url}`);
            });
            console.log('About Us images are preloading in the background...');
        }

        function showPage(pageId, params = {}) {
            // If the requested pageId is already the current page, just scroll to top and return.
            // This prevents re-rendering if the user clicks the same nav link or logo (if already on home).
            if (pageId === currentPageId) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
                return;
            }

            const newPageContent = pages[pageId];
            if (!newPageContent) {
                appContent.innerHTML = `<section class="container mx-auto px-6 py-16 text-center text-red-500 text-3xl page-transition active">
                                            <h2 class="mb-4">Page Not Found</h2>
                                            <p>The page you are looking for does not exist.</p>
                                        </section>`;
                currentPageId = pageId; // Still update currentPageId even for not found
                window.location.hash = pageId;
                return;
            }

            // Animate out the current page if one exists
            const currentPageElement = appContent.querySelector('.page-transition.active');
            if (currentPageElement) {
                // If there's an active page, animate it out before injecting new content
                currentPageElement.classList.remove('active');
                gsap.to(currentPageElement, {
                    opacity: 0,
                    y: 20,
                    duration: 0.3,
                    ease: 'power2.out',
                    onComplete: () => {
                        appContent.innerHTML = newPageContent; // Clear and inject new content after old page fades out
                        const newPage = appContent.querySelector('.page-transition');
                        if (newPage) {
                            void newPage.offsetWidth; // Force reflow
                            newPage.classList.add('active');
                            gsap.fromTo(newPage, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.5, ease: 'power2.out' });
                        }
                        // Call specific initialization logic for the new page
                        initializePageSpecifics(pageId, params);
                    }
                });
            } else {
                // Initial load: directly append content and animate in
                appContent.innerHTML = newPageContent;
                const newPage = appContent.querySelector('.page-transition');
                if (newPage) {
                    void newPage.offsetWidth; // Force reflow
                    newPage.classList.add('active');
                    gsap.fromTo(newPage, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.5, ease: 'power2.out' });
                }
                // Call specific initialization logic for the new page
                initializePageSpecifics(pageId, params);
            }

            currentPageId = pageId; // Update the global tracker
            window.location.hash = pageId; // Update the URL hash
            window.scrollTo({ top: 0, behavior: 'smooth' }); // Always scroll to top on page change
        }

        // NEW HELPER FUNCTION: Centralize page-specific initializations
        function initializePageSpecifics(pageId, params) {
            if (pageId === 'calendar') {
                renderCalendar(currentYear, currentMonth);
                document.getElementById('prev-month').addEventListener('click', () => changeMonth(-1));
                document.getElementById('next-month').addEventListener('click', () => changeMonth(1));
            } else if (pageId === 'services') {
                const isMobile = window.matchMedia('(max-width: 768px)').matches;
                document.querySelectorAll('.service-card').forEach(card => {
                    const descriptionMobile = card.querySelector('.service-description');
                    const collapsibleContent = card.querySelector('.service-collapsible-content');
                    const desktopFrontText = card.querySelector('.service-card-front-text');
                    const desktopBackPrice = card.querySelector('.service-card-back-price');

                    // Remove existing listeners to prevent duplicates
                    const oldClickHandler = card.__clickHandler;
                    const oldMouseleaveHandler = card.__mouseleaveHandler;
                    if (oldClickHandler) card.removeEventListener('click', oldClickHandler);
                    if (oldMouseleaveHandler) card.removeEventListener('mouseleave', oldMouseleaveHandler);

                    if (isMobile) {
                        gsap.set(desktopFrontText, { display: 'none' });
                        gsap.set(desktopBackPrice, { display: 'none' });
                        gsap.set(descriptionMobile, { display: 'block', opacity: 1 });
                        gsap.set(collapsibleContent, { height: 0, opacity: 0, overflow: 'hidden' });

                        const newClickHandler = function() {
                            if (!this.classList.contains('expanded')) {
                                gsap.to(collapsibleContent, {
                                    height: collapsibleContent.scrollHeight,
                                    opacity: 1,
                                    duration: 0.3,
                                    ease: 'power2.out',
                                    onComplete: () => { collapsibleContent.style.height = 'auto'; }
                                });
                                this.classList.add('expanded');
                            } else {
                                gsap.to(collapsibleContent, {
                                    height: 0,
                                    opacity: 0,
                                    duration: 0.3,
                                    ease: 'power2.out',
                                    onComplete: () => { collapsibleContent.style.height = 0; }
                                });
                                this.classList.remove('expanded');
                            }
                        };
                        card.addEventListener('click', newClickHandler);
                        card.__clickHandler = newClickHandler;
                    } else {
                        gsap.set(descriptionMobile, { display: 'none' });
                        gsap.set(collapsibleContent, { display: 'none' });
                        gsap.set(desktopFrontText, { display: 'flex', x: '0%', opacity: 1 });
                        gsap.set(desktopBackPrice, { display: 'flex', x: '100%', opacity: 0 });

                        const newClickHandler = function() {
                            if (!this.classList.contains('expanded')) {
                                gsap.to(desktopFrontText, { x: '-100%', opacity: 0, duration: 0.5, ease: 'power2.inOut' });
                                gsap.to(desktopBackPrice, { x: '0%', opacity: 1, duration: 0.5, ease: 'power2.inOut' });
                                this.classList.add('expanded');
                            } else {
                                gsap.to(desktopFrontText, { x: '0%', opacity: 1, duration: 0.5, ease: 'power2.inOut' });
                                gsap.to(desktopBackPrice, { x: '100%', opacity: 0, duration: 0.5, ease: 'power2.inOut' });
                                this.classList.remove('expanded');
                            }
                        };
                        card.addEventListener('click', newClickHandler);
                        card.__clickHandler = newClickHandler;

                        const newMouseleaveHandler = function() {
                            if (this.classList.contains('expanded')) {
                                gsap.to(desktopFrontText, { x: '0%', opacity: 1, duration: 0.5, ease: 'power2.inOut' });
                                gsap.to(desktopBackPrice, { x: '100%', opacity: 0, duration: 0.5, ease: 'power2.inOut' });
                                this.classList.remove('expanded');
                            }
                        };
                        card.addEventListener('mouseleave', newMouseleaveHandler);
                        card.__mouseleaveHandler = newMouseleaveHandler;
                    }
                });
            } else if (pageId === 'home' || pageId === 'contact') {
                initHeroButtonLiquidAnimation();
            }

            if (pageId === 'contact' && params.subject) {
                const subjectSelect = document.getElementById('subject');
                if (subjectSelect) {
                    subjectSelect.value = params.subject;
                }
            }
        }

        function renderPage(pageId, params = {}) { // Added params for dynamic content
            const pageContent = pages[pageId];
            if (pageContent) {
                appContent.innerHTML = pageContent;
                const newPage = appContent.querySelector('.page-transition');
                if (newPage) {
                    // Force reflow to ensure animation plays
                    void newPage.offsetWidth;
                    newPage.classList.add('active');
                    newPage.classList.remove('opacity-0', 'translate-y-20');
                }

                // Specific post-render logic for calendar
                if (pageId === 'calendar') {
                    renderCalendar(currentYear, currentMonth);
                    document.getElementById('prev-month').addEventListener('click', () => changeMonth(-1));
                    document.getElementById('next-month').addEventListener('click', () => changeMonth(1));
                }
                // Specific post-render logic for services to attach click and mobile collapsible listeners
                if (pageId === 'services') {
                    const isMobile = window.matchMedia('(max-width: 768px)').matches;

                    document.querySelectorAll('.service-card').forEach(card => {
                        const title = card.querySelector('h3');
                        const descriptionMobile = card.querySelector('.service-description'); // Mobile description
                        const collapsibleContent = card.querySelector('.service-collapsible-content'); // Mobile collapsible div
                        const priceMobile = card.querySelector('.service-price'); // Price within mobile collapsible

                        const desktopFrontText = card.querySelector('.service-card-front-text'); // Desktop swipe front
                        const desktopBackPrice = card.querySelector('.service-card-back-price'); // Desktop swipe back

                        if (isMobile) {
                            // Mobile: Collapsible behavior
                            // Hide desktop swipe elements
                            if (desktopFrontText) gsap.set(desktopFrontText, { display: 'none' });
                            if (desktopBackPrice) gsap.set(desktopBackPrice, { display: 'none' });

                            // Show mobile description and initialize collapsible content
                            if (descriptionMobile) gsap.set(descriptionMobile, { display: 'block', opacity: 1 });
                            if (collapsibleContent) gsap.set(collapsibleContent, { height: 0, opacity: 0, overflow: 'hidden' });

                            card.addEventListener('click', () => {
                                if (!card.classList.contains('expanded')) {
                                    // Expand: show price and expand div
                                    gsap.to(collapsibleContent, {
                                        height: collapsibleContent.scrollHeight, // Animate to content's natural height
                                        opacity: 1,
                                        duration: 0.3,
                                        ease: 'power2.out',
                                        onComplete: () => {
                                            collapsibleContent.style.height = 'auto'; // Ensure it stays 'auto' after animation
                                        }
                                    });
                                    card.classList.add('expanded');
                                } else {
                                    // Collapse: hide price and collapse div
                                    gsap.to(collapsibleContent, {
                                        height: 0,
                                        opacity: 0,
                                        duration: 0.3,
                                        ease: 'power2.out',
                                        onComplete: () => {
                                            collapsibleContent.style.height = 0; // Ensure it's 0 after animation
                                        }
                                    });
                                    card.classList.remove('expanded');
                                }
                            });

                            // Remove mouseleave listener for mobile if it was added for desktop
                            // (It's not added globally, so no explicit removal needed here, just ensure it's not added)

                        } else {
                            // Desktop: Swipe behavior
                            // Hide mobile-specific elements
                            if (descriptionMobile) gsap.set(descriptionMobile, { display: 'none' });
                            if (collapsibleContent) gsap.set(collapsibleContent, { display: 'none' });

                            // Show desktop swipe elements and initialize their positions
                            if (desktopFrontText) gsap.set(desktopFrontText, { display: 'flex', x: '0%', opacity: 1 });
                            if (desktopBackPrice) gsap.set(desktopBackPrice, { display: 'flex', x: '100%', opacity: 0 });

                            card.addEventListener('click', () => {
                                if (!card.classList.contains('expanded')) {
                                    // Expand: swipe description out (left & fade), price in (right & fade)
                                    gsap.to(desktopFrontText, { x: '-100%', opacity: 0, duration: 0.5, ease: 'power2.inOut' });
                                    gsap.to(desktopBackPrice, { x: '0%', opacity: 1, duration: 0.5, ease: 'power2.inOut' });
                                    card.classList.add('expanded'); // Add expanded class for state tracking
                                } else {
                                    // Collapse: swipe price out (right & fade), description in (left & fade)
                                    gsap.to(desktopFrontText, { x: '0%', opacity: 1, duration: 0.5, ease: 'power2.inOut' });
                                    gsap.to(desktopBackPrice, { x: '100%', opacity: 0, duration: 0.5, ease: 'power2.inOut' });
                                    card.classList.remove('expanded'); // Remove expanded class
                                }
                            });

                            card.addEventListener('mouseleave', () => {
                                if (card.classList.contains('expanded')) {
                                    // If expanded on mouseleave, revert to original state
                                    gsap.to(desktopFrontText, { x: '0%', opacity: 1, duration: 0.5, ease: 'power2.inOut' });
                                    gsap.to(desktopBackPrice, { x: '100%', opacity: 0, duration: 0.5, ease: 'power2.inOut' });
                                    card.classList.remove('expanded');
                                }
                            });
                        }
                    });
                }
                // Specific post-render logic for contact page to pre-select subject
                if (pageId === 'contact') {
                    initHeroButtonLiquidAnimation();

                    if (params.subject) {
                        const subjectSelect = document.getElementById('subject');
                        if (subjectSelect) {
                            subjectSelect.value = params.subject;
                        }
                    }
                }
                // Specific post-render logic for home page to attach liquid button animation
                // This must be called AFTER appContent.innerHTML is set.
                if (pageId === 'home') {
                    initHeroButtonLiquidAnimation();
                }

            } else {
                appContent.innerHTML = `<section class="container mx-auto px-6 py-16 text-center text-red-500 text-3xl page-transition active">
                                            <h2 class="mb-4">Page Not Found</h2>
                                            <p>The page you are looking for does not exist.</p>
                                        </section>`;
            }
        }

        function renderCalendar(year, month) {
            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            const currentMonthYearEl = document.getElementById('current-month-year');
            const calendarDaysEl = document.getElementById('calendar-days');

            if (!currentMonthYearEl || !calendarDaysEl) return; // Exit if elements not found

            currentMonthYearEl.textContent = `${monthNames[month]} ${year}`;
            calendarDaysEl.innerHTML = ''; // Clear previous days

            // Get the day of the week for the 1st of the month (0 = Sunday, 1 = Monday, ..., 6 = Saturday)
            const firstDayOfMonthRaw = new Date(year, month, 1).getDay();
            // Adjust to make Monday the first day (0 = Monday, ..., 6 = Sunday)
            const firstDayOfMonth = (firstDayOfMonthRaw + 6) % 7;

            const daysInMonth = new Date(year, month + 1, 0).getDate();

            // Add empty days for the start of the month to align with Monday start
            for (let i = 0; i < firstDayOfMonth; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.classList.add('calendar-day', 'inactive');
                calendarDaysEl.appendChild(emptyDay);
            }

            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const dayOfWeek = date.getDay(); // 0 = Sunday, 1 = Monday, ..., 6 = Saturday
                const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const dayData = availabilityData[dateString] || { status: 'available', details: ['9:00 AM - 5:00 PM: Fully Available'] }; // Default to available
                const dayStatus = dayData.status;

                const dayEl = document.createElement('div');
                dayEl.classList.add('calendar-day');

                let statusClass = '';
                // Apply weekend styling first
                if (dayOfWeek === 0 || dayOfWeek === 6) { // Sunday (0) or Saturday (6)
                    dayEl.classList.add('weekend');
                }

                if (dayStatus === 'available') {
                    statusClass = 'available';
                } else if (dayStatus === 'partially-available') {
                    statusClass = 'partially-available';
                } else if (dayStatus === 'not-available') {
                    statusClass = 'not-available';
                }
                dayEl.classList.add(statusClass);

                dayEl.innerHTML = `
                    <div class="calendar-day-number">${day}</div>
                `;

                // Only add click listener if it's not a weekend and not explicitly 'not-available'
                if (dayOfWeek !== 0 && dayOfWeek !== 6 && dayStatus !== 'not-available') {
                    dayEl.dataset.date = dateString;
                    dayEl.addEventListener('click', () => showDayTimetable(dateString, dayData.details));
                } else {
                    dayEl.classList.add('cursor-not-allowed'); // Ensure non-clickable days are styled as such
                }

                calendarDaysEl.appendChild(dayEl);
            }
        }

        function changeMonth(delta) {
            currentMonth += delta;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            renderCalendar(currentYear, currentMonth);
        }

        function showDayTimetable(dateString, details) {
            modalDateTitle.textContent = `Availability for ${new Date(dateString).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}`;
            modalTimetableContent.innerHTML = '';
            if (details && details.length > 0) {
                details.forEach(item => {
                    const p = document.createElement('p');
                    p.textContent = item;
                    modalTimetableContent.appendChild(p);
                });
            } else {
                const p = document.createElement('p');
                    p.textContent = 'No specific details available for this day.';
                    modalTimetableContent.appendChild(p);
            }
            timetableModal.classList.add('show');
        }

        function hideDayTimetable() {
            timetableModal.classList.remove('show');
        }


        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            preloadAboutUsImages(); // Start preloading About Us images as soon as the DOM is ready

            // Initial page load based on hash or default to home
            const initialHash = window.location.hash.substring(1) || 'home';
            showPage(initialHash);

            // Navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.getAttribute('href').substring(1);
                    showPage(pageId);
                    // Close mobile menu if open
                    if (!mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                    }
                });
            });

            // Mobile menu toggle
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // Handle the new "Ask Us for a Quote" button
            document.addEventListener('click', (e) => {
                if (e.target && e.target.id === 'contact-quote-btn') {
                    e.preventDefault();
                    showPage('contact', { subject: 'quote' });
                }
            });

            // Handle Logo Click (NEW LOGIC)
            if (logoLink) {
                logoLink.addEventListener('click', (e) => {
                    const currentHash = window.location.hash.substring(1) || 'home';
                    if (currentHash === 'home') {
                        e.preventDefault(); // Prevent default navigation if already on home
                        window.scrollTo({ top: 0, behavior: 'smooth' }); // Just scroll to top
                    } else {
                        e.preventDefault(); // Prevent default hash change
                        showPage('home'); // Explicitly navigate to home
                    }
                });
            }

            // Close modal
            modalCloseButton.addEventListener('click', hideDayTimetable);
            timetableModal.addEventListener('click', (e) => {
                if (e.target === timetableModal) {
                    hideDayTimetable();
                }
            });

            // Handle browser back/forward buttons
            window.addEventListener('hashchange', () => {
                const newHash = window.location.hash.substring(1);
                showPage(newHash || 'home');
            });
        });

        // --- NEW: Liquid Button Animation Logic ---
        function initHeroButtonLiquidAnimation() {
            const liquidButtonContainers = document.querySelectorAll('.liquid-button-container');

            liquidButtonContainers.forEach(container => {
                // Use container.querySelector to find elements specific to this button container
                const heroBtn = container.querySelector('.hero-btn');
                const liquidFillLayer = container.querySelector('.liquid-fill-layer');
                const dynamicElementsContainer = container.querySelector('.dynamic-elements-container');
                const heroBtnTextLiquid = container.querySelector('.hero-btn-text-liquid');

                let fillTimeline; // To control the animation sequence

                // --- NEW GLOBAL CONTROL FUNCTIONS ---
                function setOverallAnimationSpeed(factor) {
                    if (fillTimeline) {
                        fillTimeline.timeScale(factor);
                    }
                }

                /**
                 * Sets the overall delay before the animation starts playing on mouseenter,
                 * and also affects the delay before it starts reversing on mouseleave.
                 * @param {number} seconds - The delay in seconds. 0 for no delay.
                 */
                function setOverallAnimationDelay(seconds) {
                    if (fillTimeline) {
                        fillTimeline.delay(seconds);
                    }
                }
                // --- END NEW GLOBAL CONTROL FUNCTIONS ---


                // Set initial state for the liquid fill layer (hidden at the bottom)
                gsap.set(liquidFillLayer, { height: -1 });


                container.addEventListener('mouseenter', () => {
                    // Kill any existing timeline to prevent conflicts on rapid hover
                    if (fillTimeline) {
                        fillTimeline.kill();
                    }
                    dynamicElementsContainer.innerHTML = ''; // Clear any leftover dynamic elements
                    gsap.set(liquidFillLayer, { height: 0 }); // Reset liquid fill layer
                    gsap.set(heroBtnTextLiquid, { clipPath: 'inset(100% 0% 0% 0%)' }); // Reset liquid text to hidden

                    fillTimeline = gsap.timeline({
                        defaults: { ease: "power2.out" },
                        onComplete: () => {
                            // Ensure final state is fully filled and text color is correct
                            gsap.set(liquidFillLayer, { height: '100%' }); // Main fill is 100%
                            // The wave surface should also be fully integrated or hidden
                            gsap.set(heroBtnTextLiquid, { clipPath: 'inset(0% 0% 0% 0%)' }); // Ensure liquid text is fully visible
                        },
                        onReverseComplete: () => { // This callback is crucial for cleanup on reverse
                            dynamicElementsContainer.innerHTML = ''; // Clear all dynamic drops and droplets
                            gsap.set(liquidFillLayer, { height: 0 }); // Reset liquid fill layer to 0 height
                            gsap.set(heroBtnTextLiquid, { clipPath: 'inset(100% 0% 0% 0%)' }); // Reset liquid text to hidden
                        }
                    });

                    // --- APPLY GLOBAL CONTROLS HERE AFTER TIMELINE IS CREATED ---
                    setOverallAnimationSpeed(2); // Set to 1.0 for original speed
                    setOverallAnimationDelay(0); // Set to 0.0 for no delay
                    // --- END APPLY GLOBAL CONTROLS ---


                    // 1. Create and animate multiple "wavy droplets" for the stream effect
                    const numDynamicDrops = 300; // Increased for more continuous stream
                    for (let i = 0; i < numDynamicDrops; i++) {
                        const drop = document.createElement('div');
                        drop.classList.add('dynamic-drop');
                        dynamicElementsContainer.appendChild(drop);

                        // Start from top-right area
                        const startX = container.offsetWidth * (0.8 + Math.random() * 0.4); // From 80% to 120% width
                        const startY = -(20 + Math.random() * 30); // Start slightly above the button, ensuring quick entry
                        const size = 10 + Math.random() * 2; // Varied sizes for drops

                        // Define the start properties for the droplet's animation
                        const dropStartProps = {
                            width: size,
                            height: size,
                            x: startX,
                            y: startY,
                            opacity: 1, // Start visible as requested
                            rotation: Math.random() * 360,
                            scaleX: 1,
                            scaleY: 1
                        };
                        // Define the end properties for the droplet's animation
                        const dropEndProps = {
                            x: container.offsetWidth * (0.1 + Math.random() * 0.5) - size / 2, // Spread across button, avoid left edge
                            y: container.offsetHeight * (0.1 + Math.random() * 5) - size / 2, // Fall towards bottom
                            scaleX: 1 + Math.random() * 0.3, // Slight squash/stretch
                            scaleY: 1 - Math.random() * 0.3, // Slight squash/stretch
                            rotation: '+=720', // Spin as it falls
                            duration: 1.0 + Math.random() * 0.3, // **UPDATED: Shorter duration (max 1.3s)**
                            ease: "power1.in"
                        };

                        fillTimeline.fromTo(drop, dropStartProps, dropEndProps, 0.02 * i); // Original stagger

                        // Add a tween to fade out the drop *after* it has landed
                        fillTimeline.to(drop, { opacity: 0, duration: 0.3, ease: "power1.out" }, `+=${dropEndProps.duration * 0.8}`); // **UPDATED: Shorter duration and opacity to 0**
                    }

                    // 2. Create and animate "splashing droplets" for extra realism
                    const numSplashingDroplets = 50; // Increased
                    for (let i = 0; i < numSplashingDroplets; i++) {
                        const droplet = document.createElement('div');
                        droplet.classList.add('droplet');
                        dynamicElementsContainer.appendChild(droplet);

                        const dSize = 2 + Math.random() * 2; // Smaller droplet sizes
                        const dStartX = container.offsetWidth * (0.7 + Math.random() * 0.3);
                        const dStartY = -(10 + Math.random() * 20); // Start slightly above the button, ensuring quick entry

                        // Define start properties for splashing droplet
                        const dropletStartProps = {
                            width: dSize,
                            height: dSize,
                            x: dStartX,
                            y: dStartY,
                            opacity: 1, // Start visible
                            rotation: Math.random() * 360,
                            scaleX: 1,
                            scaleY: 1
                        };
                        // Define end properties for splashing droplet
                        const dropletEndProps = {
                            y: container.offsetHeight * (0.9 + Math.random() * 0.1), // Fall towards bottom
                            x: dStartX - (Math.random() * 40), // Horizontal drift
                            scaleX: 0.8 + Math.random() * 0.6, // Splash scale
                            scaleY: 0.8 + Math.random() * 0.6, // Splash scale
                            rotation: '+=360',
                            duration: 0.5 + Math.random() * 0.2, // **UPDATED: Shorter duration**
                            ease: "power1.in"
                        };

                        fillTimeline.fromTo(droplet, dropletStartProps, dropletEndProps, 0.1 * i); // Original stagger

                        // Add a tween to fade out the splashing droplet
                        fillTimeline.to(droplet, { opacity: 0.6, duration: 0.4, ease: "power1.out" }, `+=${dropletEndProps.duration * 0.8}`);
                    }

                    // 3. Animate the main liquid fill layer rising from bottom up
                    // This starts after the initial stream has begun
                    fillTimeline.to(liquidFillLayer, {
                        height: '110%',
                        duration: 1.6, // Original duration
                        ease: "power2.inOut",
                    }, 0.6); // Original start time

                    fillTimeline.to(heroBtnTextLiquid, {
                        clipPath: 'inset(0% 0% 0% 0%)', // Animate clip-path to reveal from bottom
                        duration: 1.6, // Match the duration of liquidFillLayer's height animation
                        ease: "power2.inOut"
                    }, 0.6); // Match the start time of the liquidFillLayer's height animation (0.9 in your current code)
                });

                container.addEventListener('mouseleave', () => {
                    if (fillTimeline) {
                        // Reversing the timeline will automatically respect its timeScale and delay.
                        fillTimeline.reverse();

                        // Immediately animate all currently visible dynamic drops and droplets to disappear faster.
                        // This needs to be outside the timeline to override its reversal,
                        // and its own speed should be relative to the timeline's current timeScale.
                        const activeDrops = dynamicElementsContainer.querySelectorAll('.dynamic-drop, .droplet');
                        gsap.to(activeDrops, {
                            opacity: 0, // Fade out
                            y: "-=50", // Move slightly up as they disappear
                            // Adjust duration based on the current timeScale of the fillTimeline
                            duration: 0.4 / fillTimeline.timeScale(),
                            ease: "power1.out",
                            // Adjust stagger based on the current timeScale of the fillTimeline
                            stagger: 0.01 / fillTimeline.timeScale(),
                            onComplete: function() {
                                this.targets().forEach(el => el.remove());
                            }
                        });
                    }
                });
            });
        }
    </script>
</body>
</html>
